import{c as D,d as T,s as S,r as j,u as y,j as l,A as F,T as b,R as k,P as I}from"./index-dJmx2XrE.js";import{j as C,k as E}from"./constants-G6jq7zq6.js";var x=(t=>(t.getDivisions="divisions",t))(x||{});const O=async({queryKey:t})=>{const{limit:n,offset:o,search:u,role:c,authToken:d}=t[1];try{const s=await D.divisionsApi.divisionsList(n,o,u,c,d);return C(s.status)?s.data:{}}catch(s){return console.log(s),{}}},P={filter:{name:"",id:0}},R=T(t=>({...P,setFilter:n=>t(()=>({filter:n})),clearFilter:()=>t(()=>({filter:{id:0,name:""}}))})),A=S.div`
  margin-bottom: 20px;
  border-radius: 16px;
  background-color: #f1f4f9;
`,_=({label:t="Ваше подразделение",...n})=>{const{filter:o,setFilter:u,clearFilter:c}=R(),[d,s]=j.useState(o.name||""),{role:p}=y(),h=localStorage.getItem("authToken")??"",{data:a,isLoading:m,isError:f}=E({queryKey:[x.getDivisions,{limit:600,offset:0,search:"",role:p,authToken:h}],queryFn:O,refetchOnWindowFocus:!1}),g=(e,i,v)=>{v==="clear"?(c(),s("")):i&&u({id:i.id,name:i.name})};let r=[];return m?r=[{id:-1,name:"Загрузка данных..."}]:f?r=[{id:-2,name:"Ошибка загрузки данных"}]:a!=null&&a.results&&(r=a.results.filter(e=>e.name!=="Соискатель")),l.jsx(A,{children:l.jsx(F,{multiple:!1,options:r,getOptionLabel:e=>e.name,value:o.name!=="Соискатель"&&r.find(e=>e.name===o.name)||null,inputValue:d,onInputChange:(e,i)=>s(i),onChange:g,isOptionEqualToValue:(e,i)=>e.id===i.id,noOptionsText:m?"Загрузка данных...":f?"Ошибка загрузки данных":"Нет данных",renderInput:e=>l.jsx(b,{...e,label:t&&p===k.STUDENT?"Ваш факультет":t,variant:"outlined",InputProps:{...e.InputProps,sx:{borderRadius:"16px"}}}),PaperComponent:e=>l.jsx(I,{...e,style:{borderRadius:"16px"}}),...n})})};export{_ as D,R as u};

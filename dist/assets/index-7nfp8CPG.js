import{r as _,j as e,F as w,i as C}from"./index-pzaA-WxM.js";import{c as M,u as R,a as V,d as $,e as y,Q as O,f as E,F as N,D as Q,g as n,h as o,i as q,j as v,T as z,S as B,M as H,t as I}from"./constants-DhoXhEiU.js";import"./useQuery-qHXsNPj9.js";const J=["department","contact_name","email","phone","date"],K=M(J),k=()=>{var l,c,d;const{control:r,formState:{errors:s},reset:p}=R({resolver:I(K)}),{resetDateTime:x,time:j,startDate:f}=V(),{filter:g,clearFilter:F}=$(),{isLoading:i,mutate:h}=y({mutationKey:[O.createCert],mutationFn:E}),[D,m]=_.useState(!1),S=a=>{const t=a,u=j.split(":"),b=new Date(f),T=new Date(b.setHours(+u[0],+u[1])-60*60*1e3);t.date=T.toJSON(),t.department=g.id,h(t,{onSuccess:()=>{m(!0),setTimeout(()=>m(!1),3e3),x(),F(),p({contact_name:"",phone:"",email:"",date:""})}})};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{submitFn:S,children:[e.jsx(Q,{}),e.jsx(n,{field:"contact_name",error:((l=s.contact_name)==null?void 0:l.message)||"",control:r,render:({field:a})=>{var t;return e.jsx(o,{fieldValue:"contact_name",error:((t=s.contact_name)==null?void 0:t.message)||"",field:a})}}),e.jsxs(w,{$direction:C?"column":"row",$gap:15,$justify:"space-between",$align:"flex-start",children:[e.jsx(n,{field:"email",error:((c=s.email)==null?void 0:c.message)||"",control:r,render:({field:a})=>{var t;return e.jsx(o,{fieldValue:"email",error:((t=s.email)==null?void 0:t.message)||"",field:a})}}),e.jsx(n,{field:"phone",error:((d=s.phone)==null?void 0:d.message)||"",control:r,render:({field:a})=>{var t;return e.jsx(o,{fieldValue:"phone",error:((t=s.phone)==null?void 0:t.message)||"",field:a})}})]}),e.jsxs(q,{children:[e.jsx(v,{}),e.jsx(z,{})]}),e.jsx(B,{label:"Отправить",loading:i,disabled:i})]}),e.jsx(H,{isOpen:D})]})};export{k as default};

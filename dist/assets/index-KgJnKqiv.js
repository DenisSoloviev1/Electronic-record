import{s as p,r as q,j as e,F as M,i as R}from"./index-940E0t59.js";import{c as V,u as $,a as v,b as O,d as k,e as z,Q as E,f as N,F as P,C as Q,g as o,h as n,i as A,D as B,T as H,S as I,M as J,t as K}from"./constants-96GYyPgZ.js";import"./useQuery-JFJvDIj_.js";const L=p.p`
  margin: 1rem 0;
`,W=p.a`
  color: #007bff;
  text-decoration: none;
  
  &:hover {
    text-decoration: underline;
  }
`,G=["department","type","contact_name","email","phone","date"],U=V(G),ee=()=>{var m,c,d;const{control:a,formState:{errors:r},handleSubmit:x,reset:f}=$({resolver:K(U)}),{resetDateTime:h,time:j,startDate:g}=v(),{filter:F,clearFilter:S}=O(),{filter:b,clearFilter:C}=k(),{isLoading:i,mutate:D}=z({mutationKey:[E.createCert],mutationFn:N}),[y,l]=q.useState(!1),T=s=>{const t=s,u=j.split(":"),_=new Date(g),w=new Date(_.setHours(+u[0],+u[1])-60*60*1e3);t.date=w.toJSON(),t.type=F.id,t.department=b.id,D(t,{onSuccess:()=>{l(!0),setTimeout(()=>l(!1),3e3),h(),S(),C(),f({contact_name:"",phone:"",email:"",date:""})}})};return e.jsxs(e.Fragment,{children:[e.jsxs(P,{submitFn:x(T),children:[e.jsx(Q,{}),e.jsx(o,{field:"contact_name",rules:{required:!0},error:((m=r.contact_name)==null?void 0:m.message)||"",control:a,render:({field:s})=>{var t;return e.jsx(n,{fieldValue:"contact_name",error:((t=r.contact_name)==null?void 0:t.message)||"",field:s})}}),e.jsxs(M,{$direction:R?"column":"row",$gap:15,$justify:"space-between",$align:"flex-start",children:[e.jsx(o,{field:"email",rules:{required:!0},error:((c=r.email)==null?void 0:c.message)||"",control:a,render:({field:s})=>{var t;return e.jsx(n,{fieldValue:"email",error:((t=r.email)==null?void 0:t.message)||"",field:s})}}),e.jsx(o,{field:"phone",rules:{required:!0},error:((d=r.phone)==null?void 0:d.message)||"",control:a,render:({field:s})=>{var t;return e.jsx(n,{fieldValue:"phone",error:((t=r.phone)==null?void 0:t.message)||"",field:s})}})]}),e.jsxs(A,{children:[e.jsx(B,{}),e.jsx(H,{})]}),e.jsx(L,{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox"}),' Нажимая кнопку "Зарегистрироваться", Вы даёте свое  ',e.jsx(W,{href:"https://nastavnikprof.donstu.ru/personal.html?from=autorization&type=register",children:"Согласие на обработку персональных данных"}),' в соответствии с Федеральным Законом №152-ФЗ от 27.07.2006 "О персональных данных".']})}),e.jsx(I,{label:"Отправить",loading:i,disabled:i})]}),e.jsx(J,{isOpen:y})]})};export{ee as default};

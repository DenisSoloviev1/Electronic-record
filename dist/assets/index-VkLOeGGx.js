import{r as _,j as e,F as w,i as V}from"./index-940E0t59.js";import{c as C,u as M,a as R,d as $,e as O,Q as E,f as N,F as Q,j as q,g as n,h as o,i as v,D as z,T as B,S as H,M as I,t as J}from"./constants-96GYyPgZ.js";import"./useQuery-JFJvDIj_.js";const K=["department","type","contact_name","email","phone","date"],L=C(K),A=()=>{var l,c,d,u;const{control:r,formState:{errors:a},reset:x}=M({resolver:J(L)}),{resetDateTime:j,time:f,startDate:g}=R(),{filter:F,clearFilter:h}=$(),{isLoading:i,mutate:D}=O({mutationKey:[E.createCert],mutationFn:N}),[S,m]=_.useState(!1),y=s=>{const t=s,p=f.split(":"),T=new Date(g),b=new Date(T.setHours(+p[0],+p[1])-60*60*1e3);t.date=b.toJSON(),t.department=F.id,D(t,{onSuccess:()=>{m(!0),setTimeout(()=>m(!1),3e3),j(),h(),x({contact_name:"",phone:"",email:"",date:""})}})};return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{submitFn:y,children:[e.jsx(q,{}),e.jsx(n,{field:"type",error:((l=a.type)==null?void 0:l.message)||"",control:r,render:({field:s})=>{var t;return e.jsx(o,{fieldValue:"type",error:((t=a.type)==null?void 0:t.message)||"",field:s})}}),e.jsx(n,{field:"contact_name",error:((c=a.contact_name)==null?void 0:c.message)||"",control:r,render:({field:s})=>{var t;return e.jsx(o,{fieldValue:"contact_name",error:((t=a.contact_name)==null?void 0:t.message)||"",field:s})}}),e.jsxs(w,{$direction:V?"column":"row",$gap:15,$justify:"space-between",$align:"flex-start",children:[e.jsx(n,{field:"email",error:((d=a.email)==null?void 0:d.message)||"",control:r,render:({field:s})=>{var t;return e.jsx(o,{fieldValue:"email",error:((t=a.email)==null?void 0:t.message)||"",field:s})}}),e.jsx(n,{field:"phone",error:((u=a.phone)==null?void 0:u.message)||"",control:r,render:({field:s})=>{var t;return e.jsx(o,{fieldValue:"phone",error:((t=a.phone)==null?void 0:t.message)||"",field:s})}})]}),e.jsxs(v,{children:[e.jsx(z,{}),e.jsx(B,{})]}),e.jsx(H,{label:"Отправить",loading:i,disabled:i})]}),e.jsx(I,{isOpen:S})]})};export{A as default};

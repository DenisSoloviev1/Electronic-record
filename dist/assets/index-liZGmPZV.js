import{r as _,j as e,F as q,i as M}from"./index-pzaA-WxM.js";import{c as R,u as V,a as $,b as O,d as k,e as v,Q as z,f as E,F as N,D as Q,C as B,g as n,h as o,i as H,j as I,T as J,S as K,M as L,t as P}from"./constants-DhoXhEiU.js";import"./useQuery-qHXsNPj9.js";const W=["department","type","contact_name","email","phone","date"],A=R(W),Y=()=>{var m,c,d;const{control:r,formState:{errors:a},handleSubmit:p,reset:x}=V({resolver:P(A)}),{resetDateTime:f,time:j,startDate:h}=$(),{filter:F,clearFilter:g}=O(),{filter:S,clearFilter:D}=k(),{isLoading:i,mutate:b}=v({mutationKey:[z.createCert],mutationFn:E}),[y,l]=_.useState(!1),C=s=>{const t=s,u=j.split(":"),T=new Date(h),w=new Date(T.setHours(+u[0],+u[1])-60*60*1e3);t.date=w.toJSON(),t.type=F.id,t.department=S.id,b(t,{onSuccess:()=>{l(!0),setTimeout(()=>l(!1),3e3),f(),g(),D(),x({contact_name:"",phone:"",email:"",date:""})}})};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{submitFn:p(C),children:[e.jsx(Q,{}),e.jsx(B,{}),e.jsx(n,{field:"contact_name",rules:{required:!0},error:((m=a.contact_name)==null?void 0:m.message)||"",control:r,render:({field:s})=>{var t;return e.jsx(o,{fieldValue:"contact_name",error:((t=a.contact_name)==null?void 0:t.message)||"",field:s})}}),e.jsxs(q,{$direction:M?"column":"row",$gap:15,$justify:"space-between",$align:"flex-start",children:[e.jsx(n,{field:"email",rules:{required:!0},error:((c=a.email)==null?void 0:c.message)||"",control:r,render:({field:s})=>{var t;return e.jsx(o,{fieldValue:"email",error:((t=a.email)==null?void 0:t.message)||"",field:s})}}),e.jsx(n,{field:"phone",rules:{required:!0},error:((d=a.phone)==null?void 0:d.message)||"",control:r,render:({field:s})=>{var t;return e.jsx(o,{fieldValue:"phone",error:((t=a.phone)==null?void 0:t.message)||"",field:s})}})]}),e.jsxs(H,{children:[e.jsx(I,{}),e.jsx(J,{})]}),e.jsx("p",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox"}),'Нажимая кнопку "Зарегистрироваться", Вы даёте свое  ',e.jsx("a",{href:"https://nastavnikprof.donstu.ru/personal.html?from=autorization&type=register",children:"Согласие на обработку персональных данных"}),' с в соответствии с Федеральным Законом №152-ФЗ от 27.07.2006 "О персональных данных".']})}),e.jsx(K,{label:"Отправить",loading:i,disabled:i})]}),e.jsx(L,{isOpen:y})]})};export{Y as default};
